<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8">
</head>
<body>
	<script src="defineClass.js"></script>
	<script>
		"use strict";
		var test = new unittest();
		//unittest本身的测试
		test.addTestCase("every error must be ok", function () {
			assertEquals(1, 1);
			assertTrue(true);	
		})
		.addTestCase("defineClass must be ok", function () {
			var People = defineClass(null, {
				init: function (name, age, sex) {
					this.name = name;
					this.age = age;
					this.sex = sex;
				}
			});
			assertEquals(People._super, null);
			for (var key in People) {
				log(key);
			}
			
			var p = new People("zhanghao", 22, "male");
			log(p);
			for (var key in p) {
				log(key);
			}
			assertTrue(p.type === People);	
		})
		.addTestCase("props must be obj and must have init function, superClass must be null or class", function () {
			var People = defineClass(null, {
				init: function () {
					
				}
			});
			var p = new People(); 
			log(p.type);
			log(Object.prototype.toString.call(p.type));
		})
		.addTestCase("inherit must be ok", function () {
			var People = defineClass(null, {
					init: function (name, age, sex) {
						this.name = name;
						this.age = age;
						this.sex = sex;
					},
					say: function () {
						return "I'm a people, name is " + this.name + ", age is " + this.age + ", sex is " + this.sex;
					}
				} 
			);
			
			var p = new People("zhanghao", 22, "male");
			log(p.say());
			
			var Student = defineClass(People, {
				init: function (name, age, sex, stuId) {
					_super(Student, this).init(name, age, sex);
					this.stuId = stuId;
				},
				say: function () {
					return "I'm a student, name is " + this.name + ", age is " + this.age + ", sex is " + this.age + ", stuId is " + this.stuId;
				}
			});
			
			var s = new Student("xxx", 22, "male", "122222");
			log(s.say());
			
			var zh = defineClass(Object, {
				init: function () {
					
				}
			});
		});
		test.run();
		
		
		
		
	</script>
</body>
</html>